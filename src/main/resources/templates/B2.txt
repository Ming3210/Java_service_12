âœ… Quy trÃ¬nh xÃ¡c thá»±c JWT:
ğŸ” BÆ°á»›c 1: Client gá»­i yÃªu cáº§u Ä‘Äƒng nháº­p
Client (trÃ¬nh duyá»‡t/mobile app) gá»­i thÃ´ng tin Ä‘Äƒng nháº­p (username/password) Ä‘áº¿n Server thÃ´ng qua API POST /login.

ğŸ” BÆ°á»›c 2: Server kiá»ƒm tra thÃ´ng tin
Server xÃ¡c minh thÃ´ng tin Ä‘Äƒng nháº­p (so sÃ¡nh vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u).

Náº¿u há»£p lá»‡, server sáº½ táº¡o JWT chá»©a thÃ´ng tin ngÆ°á»i dÃ¹ng (vÃ­ dá»¥: user_id, role, exp...) vÃ  kÃ½ token báº±ng secret key hoáº·c private key.

ğŸ” BÆ°á»›c 3: Server gá»­i JWT vá» cho client
JWT Ä‘Æ°á»£c tráº£ vá» trong response (thÆ°á»ng náº±m trong body hoáº·c header).

Client lÆ°u trá»¯ JWT, thÆ°á»ng lÃ :

LocalStorage (web)

SecureStorage (mobile)

HttpOnly Cookie (tÄƒng báº£o máº­t)

ğŸ” BÆ°á»›c 4: Client gá»­i yÃªu cáº§u kÃ¨m JWT
Khi cáº§n truy cáº­p tÃ i nguyÃªn báº£o vá»‡ (protected route), client gá»­i HTTP request Ä‘áº¿n server (GET, POST, v.v.) vÃ  Ä‘Ã­nh kÃ¨m JWT trong header:


Authorization: Bearer <token>
ğŸ” BÆ°á»›c 5: Server kiá»ƒm tra vÃ  xÃ¡c thá»±c JWT
Server nháº­n request vÃ :

Giáº£i mÃ£ JWT (decode).

XÃ¡c thá»±c chá»¯ kÃ½ (signature) Ä‘á»ƒ Ä‘áº£m báº£o token khÃ´ng bá»‹ chá»‰nh sá»­a.

Kiá»ƒm tra cÃ¡c claim nhÆ°:

exp: token háº¿t háº¡n chÆ°a?

iss, aud: token thuá»™c Ä‘Ãºng nguá»“n khÃ´ng?

ğŸ” BÆ°á»›c 6: Server pháº£n há»“i
Náº¿u JWT há»£p lá»‡: server xá»­ lÃ½ yÃªu cáº§u vÃ  gá»­i dá»¯ liá»‡u/response vá» cho client.

Náº¿u JWT khÃ´ng há»£p lá»‡ hoáº·c háº¿t háº¡n: server tráº£ vá» mÃ£ lá»—i 401 Unauthorized hoáº·c 403 Forbidden.

ğŸ§© TÃ³m táº¯t vai trÃ² cá»§a tá»«ng bÆ°á»›c:
BÆ°á»›c	Vai trÃ²
B1	Thu tháº­p thÃ´ng tin xÃ¡c thá»±c ban Ä‘áº§u tá»« ngÆ°á»i dÃ¹ng.
B2	XÃ¡c minh thÃ´ng tin Ä‘Äƒng nháº­p vÃ  táº¡o token an toÃ n.
B3	Truyá»n JWT vá» client Ä‘á»ƒ sá»­ dá»¥ng trong cÃ¡c láº§n truy cáº­p sau.
B4	Client gá»­i yÃªu cáº§u cÃ³ Ä‘Ã­nh kÃ¨m token Ä‘á»ƒ Ä‘Æ°á»£c á»§y quyá»n.
B5	Server kiá»ƒm tra tÃ­nh há»£p lá»‡ cá»§a token vÃ  xÃ¡c thá»±c ngÆ°á»i dÃ¹ng.
B6	Pháº£n há»“i dá»¯ liá»‡u tÆ°Æ¡ng á»©ng hoáº·c lá»—i báº£o máº­t.